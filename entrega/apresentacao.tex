\documentclass[10pt]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{booktabs}

% Tema
\usetheme{Madrid}
\usecolortheme{default}

% Configuração de cores
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% Configuração do listings para Python
\lstdefinestyle{pythonstyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\tiny,
    breakatwhitespace=false,         
    breaklines=true,                 
    keepspaces=true,                 
    numbers=left,                    
    numbersep=3pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=pythonstyle}

% Informações da apresentação
\title{Orientações para Entrega do Código}
\subtitle{ELE634 -- Laboratório de Sistemas II}
\author[André Batista]{André Costa Batista}
\institute[DEE/UFMG]{Universidade Federal de Minas Gerais}
\date{\today}

\begin{document}

% Slide de título
\frame{\titlepage}

% Sumário
\begin{frame}{Sumário}
    \tableofcontents
\end{frame}

% Seção 1: Introdução
\section{Introdução}

\begin{frame}{Introdução}
    \begin{block}{Objetivo}
        Estabelecer o padrão para entrega das implementações dos algoritmos de otimização
    \end{block}
    
    \vspace{0.5cm}
    
    \begin{itemize}
        \item Garantir execução padronizada de todas as implementações
        \item Permitir comparação justa entre diferentes abordagens
        \item Facilitar a avaliação automatizada
    \end{itemize}
    
    \vspace{0.5cm}
    
    \begin{alertblock}{Importante}
        Todas as especificações devem ser seguidas!
    \end{alertblock}
\end{frame}

% Seção 2: Critério de Parada
\section{Critério de Parada}

\begin{frame}{Critério de Parada}
    \begin{block}{Número de Avaliações da Função Objetivo}
        Critério único para todos os algoritmos
    \end{block}
    
    \vspace{0.3cm}
    
    \textbf{O que conta como uma avaliação?}
    \begin{itemize}
        \item Cada chamada à função que calcula o valor da função objetivo
        \item Deve ser contabilizada explicitamente no código
    \end{itemize}
    
    \vspace{0.3cm}
    
    \textbf{Quando parar?}
    \begin{itemize}
        \item Ao atingir o número máximo de avaliações especificado
        \item Retornar a \textbf{melhor solução encontrada} até então
    \end{itemize}
    
    \vspace{0.3cm}
    
    \begin{alertblock}{Verificação}
        O código será revisado para verificar o correto controle de avaliações!
    \end{alertblock}
\end{frame}

% Seção 3: Estrutura da Entrega
\section{Estrutura da Entrega}

\begin{frame}[fragile]{Formato do Arquivo}
    \begin{enumerate}
        \item Pasta \textbf{zipada} com nome do grupo
        \item Arquivo Python principal com \textbf{mesmo nome do grupo}
        \item Método \texttt{\textbf{resolva}} no arquivo principal
        \item Arquivos auxiliares opcionais
    \end{enumerate}
    
    \vspace{0.5cm}
    
    \begin{exampleblock}{Exemplo: Grupo ``reginaldorossi''}
        \begin{verbatim}
reginaldorossi.zip
|-- reginaldorossi.py    # Principal (obrigatorio)
|-- heuristicas.py       # Auxiliar (opcional)
|-- operadores.py        # Auxiliar (opcional)
`-- utils.py             # Auxiliar (opcional)
        \end{verbatim}
    \end{exampleblock}
\end{frame}

% Seção 4: Método resolva
\section{Método resolva}

\begin{frame}[fragile]{Assinatura da Função}
    \begin{lstlisting}[language=Python]
def resolva(dados: Dados, numero_avaliacoes: int) -> Solucao:
    """
    Executa o algoritmo de otimizacao.
    
    Parametros:
    -----------
    dados : Dados
        Objeto com os dados da instancia
    
    numero_avaliacoes : int
        Numero maximo de avaliacoes permitidas
    
    Retorna:
    --------
    Solucao
        Objeto com rotas, tempos e funcao objetivo
    """
    # Implementacao do algoritmo aqui
    pass
    \end{lstlisting}
\end{frame}

\begin{frame}{Parâmetros de Entrada}
    \begin{description}
        \item[\texttt{dados}] Objeto da classe \texttt{Dados}
        \begin{itemize}
            \item Mesma classe do arquivo \texttt{dados.py} do repositório
            \item Contém todos os parâmetros da instância
        \end{itemize}
        
        \vspace{0.5cm}
        
        \item[\texttt{numero\_avaliacoes}] Inteiro definindo o critério de parada
        \begin{itemize}
            \item Algoritmo deve parar ao atingir este limite
            \item Controle rigoroso é obrigatório
        \end{itemize}
    \end{description}
\end{frame}

\begin{frame}{Valor de Retorno}
    \begin{block}{Objeto da Classe \texttt{Solucao}}
        Mesma classe do arquivo \texttt{solucao.py} do repositório
    \end{block}
    
    \vspace{0.5cm}
    
    \textbf{Deve conter:}
    \begin{itemize}
        \item \textbf{Rotas} (\texttt{rota}): Sequência de requisições por ônibus/viagem
        \item \textbf{Tempos de chegada} (\texttt{chegada}): Instantes de chegada em cada ponto
        \item \textbf{Função objetivo} (\texttt{fx}): Valor calculado da FO
    \end{itemize}
\end{frame}

% Seção 5: Estrutura da Classe Solucao
\section{Estrutura da Classe Solucao}

\begin{frame}{Atributos da Classe \texttt{Solucao}}
    \begin{description}
        \item[\texttt{rota[k][v]}] Lista de requisições visitadas
        \begin{itemize}
            \item Ônibus \texttt{k} na viagem \texttt{v}
            \item Sempre inicia e termina com 0 (garagem)
        \end{itemize}
        
        \vspace{0.3cm}
        
        \item[\texttt{chegada[k][v]}] Lista de tempos (float)
        \begin{itemize}
            \item Instantes de chegada correspondentes à rota
            \item Mesmo tamanho de \texttt{rota[k][v]}
            \item Primeiro elemento sempre 0.0
        \end{itemize}
        
        \vspace{0.3cm}
        
        \item[\texttt{fx}] Valor da função objetivo (float)
    \end{description}
\end{frame}

\begin{frame}[fragile]{Exemplo de Configuração (1/2)}
    \begin{lstlisting}[language=Python]
from solucao import Solucao

# Criar objeto de solucao
solucao = Solucao()

# Configurar rotas
# Onibus 1 realiza 3 viagens
solucao.rota[1] = {}
solucao.rota[1][1] = [0, 2, 4, 0]     # Viagem 1: garagem -> req 2 -> req 4 -> garagem
solucao.rota[1][2] = [0, 6, 8, 11, 0] # Viagem 2: garagem -> req 6 -> req 8 -> req 11 -> garagem
solucao.rota[1][3] = [0, 13, 0]       # Viagem 3: garagem -> req 13 -> garagem
solucao.rota[1][4] = []               # Viagem 4: nao utilizada
    \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Exemplo de Configuração (2/2)}
    \begin{lstlisting}[language=Python]
# Tempos correspondentes as rotas
solucao.chegada[1] = {}
solucao.chegada[1][1] = [3.89, 17.0, 31.08, 80.2]          # Tempos para rota[1][1]
solucao.chegada[1][2] = [80.2, 92.0, 132.5, 185.0, 200.2]  # Tempos para rota[1][2]
solucao.chegada[1][3] = [202.12, 215.0, 223.0]             # Tempos para rota[1][3]
solucao.chegada[1][4] = []                                 # Viagem nao utilizada

# Funcao objetivo
solucao.fx = 33486.4
    \end{lstlisting}
\end{frame}

\begin{frame}{Pontos Importantes}
    \begin{alertblock}{Atenção!}
        \begin{itemize}
            \item \textbf{Índice 0 é a garagem}: Toda rota inicia e termina com 0
            \item \textbf{Correspondência exata}: \texttt{len(rota[k][v]) == len(chegada[k][v])}
            \item \textbf{Viagens não utilizadas}: Listas vazias \texttt{[]}
            \item \textbf{Saída da garagem (primeira chegada)}: : Instante em que o ônibus começa o preparo para a viagem. Ou seja, é igual ao instante em que o ônibus chega na primeira requisição da viagem menos o tempo de deslocamento da garagem até essa requisição e menos o tempo de preparo inicial (que o tempo de serviço relativo à garagem).
            \item \textbf{Chegada na garagem}: Instante em que o ônibus retorna à garagem após a última requisição da viagem.
            \item \textbf{Todos ônibus/viagens}: Devem ter entradas no dicionário
            \item \textbf{IMPORTANTE}: Dentro da execução do seu algoritmo, você pode utilizar a estrutura de dados que quiser. A estrutura apresentada aqui é apenas para a \textbf{saída final} do método \texttt{resolva} através do objeto \texttt{Solucao}.
        \end{itemize}
    \end{alertblock}
\end{frame}

% Seção 6: Número de Avaliações
\section{Número de Avaliações por Instância}

\begin{frame}{Fórmula para Cálculo}
    \begin{block}{Número Máximo de Avaliações}
        \begin{equation*}
            N^{max}_{av} = 10 \times n \times K \times r
        \end{equation*}
    \end{block}
    
    \vspace{0.5cm}
    
    \textbf{Onde:}
    \begin{itemize}
        \item $n$ = número de requisições
        \item $K$ = número de ônibus disponíveis
        \item $r$ = número máximo de viagens por ônibus
    \end{itemize}
\end{frame}

\begin{frame}{Valores por Instância}
    \begin{table}
        \centering
        \small
        \begin{tabular}{lcccc}
            \toprule
            \textbf{Instância} & \textbf{n} & \textbf{K} & \textbf{r} & \textbf{$N^{max}_{av}$} \\
            \midrule
            pequena & 14 & 3 & 5 & 2.100 \\
            média & 67 & 6 & 12 & 48.240 \\
            grande & 108 & 11 & 10 & 118.800 \\
            rush & 108 & 11 & 10 & 118.800 \\
            \bottomrule
        \end{tabular}
    \end{table}
    
    \vspace{0.5cm}
    
    \begin{block}{Importante}
        É com esses valores que os algoritmos serão comparados. Nos testes de vocês, podem usar os valores que quiserem.
    \end{block}
\end{frame}

% Seção 7: Validação
\section{Validação e Avaliação}

\begin{frame}{Processo de Validação}
    \textbf{Verificações Automáticas:}
    
    \vspace{0.3cm}
    
    \begin{enumerate}
        \item \textbf{Viabilidade da solução}: Todas as restrições respeitadas
        \begin{itemize}
            \item Todas requisições atendidas
            \item Janelas de tempo
            \item Número máximo de viagens
            \item Duração total das viagens
        \end{itemize}
        
        \vspace{0.3cm}
        
        \item \textbf{Cálculo da função objetivo}
        \begin{itemize}
            \item Conferência do valor reportado
            \item Verificação de consistência
        \end{itemize}
    \end{enumerate}
    
    \vspace{0.3cm}
    
    \begin{alertblock}{Atenção}
        Soluções \textbf{inviáveis} serão descartadas da amostra para comparação!
    \end{alertblock}
\end{frame}

\begin{frame}{Protocolo de Execução}
    \begin{block}{Cada Algoritmo}
        \begin{itemize}
            \item Executado \textbf{30 vezes} em cada instância
            \item Cada chamada de \texttt{resolva} = 1 execução
            \item Total: 30 execuções × 4 instâncias = 120 execuções
        \end{itemize}
    \end{block}
    
    \vspace{0.5cm}
    
    \textbf{Análise Estatística:}
    \begin{itemize}
        \item Média (ou mediana) dos valores da FO
        \item Apenas soluções viáveis consideradas
        \item Gráficos de boxplot para comparação
    \end{itemize}
\end{frame}

% Seção 8: Recomendações
\section{Recomendações}

\begin{frame}{Boas Práticas}
    \begin{itemize}
        \item \textbf{Controle rigoroso}: Certifique-se de respeitar o limite de avaliações
        
        \vspace{0.3cm}
        
        \item \textbf{Tratamento de erros}: Evite crashes com exceções adequadas
        
        \vspace{0.3cm}
        
        \item \textbf{Documentação}: Comente o código, especialmente \texttt{resolva}
        
        \vspace{0.3cm}
        
        \item \textbf{Testes locais}: Valide com as instâncias fornecidas
    \end{itemize}
\end{frame}

% Slide final
\begin{frame}
    \begin{center}
        \Huge{Dúvidas?}
    \end{center}
\end{frame}

\end{document}
